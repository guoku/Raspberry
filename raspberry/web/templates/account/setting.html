{% extends "base.html" %}
{% load i18n staticfiles %}
{% load account %}

{% block title %}{% trans "settings" %}{% endblock %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'styles/account.css' %}">
{% endblock %}

{% block content %}
    <div id="setting">
        <h2>帐号设置</h2>

        <div class="guoku-block">
            {% display_avatar_update user_context %}

            <form method="POST" action="{% url 'web_update_profile' %}" class="base-info" id="set-base-info">
                {% csrf_token %}
                <h3>个人资料</h3>
                <div>
                    <label for="{{ profile_form.nickname.id_for_label }}">{{ profile_form.nickname.label }}</label>
                    {{ profile_form.nickname }}
                </div>

                <div>
                    <label for="{{ profile_form.email.id_for_label }}">{{ profile_form.email.label }}</label>
                    {{ profile_form.email }}
                </div>

                <div>
                    <label for="{{ profile_form.bio.id_for_label }}">{{ profile_form.bio.label }}</label>
                    {{ profile_form.bio }}
                </div>

                <div class="address">
                    <span class="label">{{ profile_form.location.label }}</span>
                    {{ profile_form.location }}
                    {{ profile_form.city }}
                </div>

                <div class="gender">
                    <span class="label">{{ profile_form.gender.label }}</span>
                    {% for radio in profile_form.gender %}
                        {{ radio }}
                    {% endfor %}
                </div>

                <div>
                    <label for="{{ profile_form.website.id_for_label }}">{{ profile_form.website.label }}</label>
                    {{ profile_form.website }}
                </div>
                <input type="submit" value="{% trans "update profile" %}" class="guoku-button">
            </form>

            <div class="bind"><span class="label">新浪微博</span><a href="{%url 'web_bind_sina'%}">绑定新浪微博</a></div>
            <div class="bind"><span class="label">淘宝网</span><a href="{%url 'web_bind_taobao' %}">绑定淘宝网</a></div>

            <form method="POST" action="{% url 'web_change_password' %}" class="psw">
                {% csrf_token %}
                <h3>更改密码</h3>

                <div>
                    {{ password_form.old_password }}
                </div>

                <div>
                    {{ password_form.new_password }}
                </div>

                <div>
                    {{ password_form.confirm_password }}
                </div>
                <input type="submit" value="修改密码" class="guoku-button">
            </form>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'scripts/account.js' %}"></script>
{% endblock %}
