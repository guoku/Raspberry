{% extends "base.html" %}
{% load i18n staticfiles %}
{% load account %}

{% block title %}{% trans "settings" %}{% endblock %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'styles/account.css' %}">
{% endblock %}

{% block content %}
    <div id="setting">
        <h2>帐号设置</h2>

        <div class="guoku-block">
            {% display_avatar_update user_context %}

            <form method="POST" action="{% url 'web_setting' %}" class="base-info" id="set-base-info">
                {% csrf_token %}
                <h3>个人资料</h3>

                <div>
                    <label for="{{ forms.nickname.id_for_label }}">{{ forms.nickname.label }}</label>
                    {{ forms.nickname }}
                </div>

                <div>
                    <label for="{{ forms.email.id_for_label }}">{{ forms.email.label }}</label>
                    {{ forms.email }}
                </div>

                <div>
                    <label for="{{ forms.bio.id_for_label }}">{{ forms.bio.label }}</label>
                    {{ forms.bio }}
                </div>

                <div class="address">
                    <span class="label">{{ forms.location.label }}</span>
                    {{ forms.location }}
                </div>

                <div class="gender">
                    <span class="label">{{ forms.gender.label }}</span>
                    {% for radio in forms.gender %}
                        {{ radio }}
                    {% endfor %}
                </div>

                <div>
                    <label for="{{ forms.website.id_for_label }}">{{ forms.website.label }}</label>
                    {{ forms.website }}
                </div>
{#                {% if base_error != None %}#}
{#                    <p class="error">{{ base_error }}</p>#}
{#                {% elif base_success != None %}#}
{#                    <p class="success">{{ base_success }}</p>#}
{#                {% endif %}#}
{##}
{#                <div>#}
{#                    <label for="nickname">昵称</label>#}
{#                    <input type="text" name="nickname" value="{{ user_context.nickname }}" id="nickname"#}
{#                           class="text-input">#}
{#                </div>#}
{##}
{#                <div>#}
{#                    <label for="email">登录邮箱</label>#}
{#                    <input type="text" name="email" value="{{ user_context.email }}" id="email" class="text-input">#}
{#                </div>#}
{##}
{#                <div>#}
{#                    <label for="bio">个人介绍</label>#}
{#                    <textarea name="bio" id="bio" class="text-input" rows="4">{{ user_context.bio }}</textarea>#}
{#                </div>#}
{##}
{#                <div class="address">#}
{#                    <span class="label">所在地</span>#}
{#                    <select name="location" class="location" data-p="{{ user_context.location }}"></select>#}
{#                    <select name="city" class="city" data-c="{{ user_context.city }}"></select>#}
{#                </div>#}
{##}
{#                <div class="gender">#}
{#                    <span class="label">性别</span>#}
{#                    <label>男 <input type="radio" name="gender" value="M"#}
{#                                    {% if user_context.gender == 'M' %}checked{% endif %}></label>#}
{#                    <label>女 <input type="radio" name="gender" value="F"#}
{#                                    {% if user_context.gender == 'F' %}checked{% endif %}></label>#}
{#                    <label>其他 <input type="radio" name="gender" value="O"#}
{#                                     {% if user_context.gender == 'O' %}checked{% endif %}></label>#}
{#                </div>#}
{##}
{#                <div>#}
{#                    <label for="website">网址</label>#}
{#                    <input type="text" name="website" value="{{ user_context.website }}" id="website"#}
{#                           class="text-input">#}
{#                </div>#}

{#                <input type="hidden" name="type" value="base">#}
                <input type="submit" value="{% trans "update profile" %}" class="guoku-button">
            </form>

            <div class="bind"><span class="label">新浪微博</span><a href="">绑定新浪微博</a></div>
            <div class="bind"><span class="label">淘宝网</span><a href="">绑定淘宝网</a></div>

            <form method="POST" action="{% url 'web_setting' %}" class="psw">
                {% csrf_token %}
                <h3>更改密码</h3>

                {% if psw_error != None %}
                    <p class="error">{{ psw_error }}</p>
                {% elif psw_success != None %}
                    <p class="success">{{ psw_success }}</p>
                {% endif %}

                <div>
                    <label for="curr_psw">当前密码</label>
                    <input type="password" name="current_psw" id="current_psw" class="text-input">
                </div>

                <div>
                    <label for="n_psw">新的密码</label>
                    <input type="password" name="new_psw" id="new_psw" class="text-input">
                </div>

                <div>
                    <label for="c_psw">确认密码</label>
                    <input type="password" name="confirm_psw" id="confirm_psw" class="text-input">
                </div>

                <input type="hidden" name="type" value="psw">
                <input type="submit" value="修改密码" class="guoku-button">
            </form>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'scripts/account.js' %}"></script>
{% endblock %}