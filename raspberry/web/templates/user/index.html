{% extends "base.html" %}
{% load staticfiles %}
{% load web %}

{% block title %}{{ title|default:'我' }}的果库{% endblock %}
{% block css %}<link rel="stylesheet" type="text/css" href="{% static 'styles/user.css' %}">{% endblock %}

{% block content %}
    <div id="user-center">
        <div class="user">
            <div class="base guoku-block">
                <div class="img-container  guoku-block">
                    <img src="{{ query_user_context.avatar_small }}" width="100" height="100" class="avatar">
                </div>
                <h2>{{ query_user_context.nickname }}</h2>
                <small>{{ query_user_context.bio }}</small>
                <address>北京</address>
                <a href="javascript:;">关注</a>
            </div>

            <div class="stat guoku-block">
                <a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}">喜爱<strong>({{ query_user_context.like_count }})</strong></a>
                <a href="{% url 'web.views.user.user_posts' query_user_context.user_id %}">添加<strong></strong></a>
                <a href="{% url 'web.views.user.user_notes' query_user_context.user_id %}">点评<strong>({{ query_user_context.entity_note_count }})</strong></a>
                <a href="{% url 'web.views.user.user_tags' query_user_context.user_id %}">标签<strong>({{ query_user_context.tag_count }})</strong></a>

                <div class="social">
                    <a href="{% url 'web.views.user.user_followings' query_user_context.user_id %}">关注了 <strong>{{ query_user_context.following_count }}</strong> 人</a>
                    <a href="{% url 'web.views.user.user_fans' query_user_context.user_id %}">关注者 <strong>{{ query_user_context.fan_count }}</strong> 人</a>
                </div>
            </div>
        </div>

        {% if content_tab == 'like' %}
            <div class="entity-nav guoku-block">
                <ul class="categories">
                    <li><a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}">所有</a></li>
                    {% for category in category_list %}
                        <li>
                            <a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}?c={{ category.category_id }}">{{ category.category_title }}</a>
                        </li>
                    {% endfor %}
                </ul>
                <ul class="filter guoku-block">
                    <li>
                        <a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}?c={{ curr_cat_id }}">按价格</a>
                    </li>
                    <li>
                        <a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}?c={{ curr_cat_id }}&p=1"
                           class="price">0-99</a></li>
                    <li>
                        <a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}?c={{ curr_cat_id }}&p=2"
                           class="price">100-499</a></li>
                    <li>
                        <a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}?c={{ curr_cat_id }}&p=3"
                           class="price">500-999</a></li>
                    <li>
                        <a href="{% url 'web.views.user.user_likes' query_user_context.user_id %}?c={{ curr_cat_id }}&p=4"
                           class="price">1000+</a></li>
                </ul>
            </div>

            {% if entity_list|length > 0 %}
                <ul class="guoku-block likes">
                    {% display_user_entity entity_list %}
                </ul>
            {% endif %}

        {% elif content_tab == 'post' %}
            <div class="date"></div>
            {% if entity_list|length > 0 %}
                {% display_user_entity entity_list %}
            {% endif %}

        {% elif content_tab == 'note' %}
            <h3 class="notes">全部点评</h3>
            {% if note_list|length > 0 %}
                {% display_user_notes note_list %}
            {% endif %}

        {% elif content_tab == 'tag' %}
            {% if tag_list|length > 0 %}
                {% display_user_tags tag_list %}
            {% endif %}

        {% elif content_tab == 'following' %}
            <h3>关注了</h3>
            {% if user_list|length > 0 %}
                {% display_user_users user_list %}
            {% endif %}

        {% else %}
            <h3>关注者</h3>
            {% if user_list|length > 0 %}
                {% display_user_users user_list %}
            {% endif %}

        {% endif %}

        {% if paginator %}
            {% display_web_paginator paginator %}
        {% endif %}
    </div>
{% endblock %}